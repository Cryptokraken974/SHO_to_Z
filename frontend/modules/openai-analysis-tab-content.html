<div id="openai-analysis-tab" class="tab-content flex flex-1 overflow-hidden">
  <!-- Main Content Area -->
  <div class="flex-1 flex flex-col bg-[#141414] overflow-hidden">
    <!-- Header -->
    <div class="bg-[#1a1a1a] border-b border-[#303030] p-6">
      <h1 class="text-white text-2xl font-bold">ğŸ¤– OpenAI Analysis</h1>
      <p class="text-[#ababab] text-sm mt-2">AI-powered analysis of your terrain and satellite data</p>
    </div>

    <!-- Main Analysis Area -->
    <div class="flex-1 p-6 overflow-y-auto">
      <!-- Image Selection Section -->
      <div class="mb-6">
        <div class="flex items-center gap-4 mb-4">
          <button id="select-images-btn" class="bg-[#00bfff] hover:bg-[#0099cc] text-white px-6 py-3 rounded-lg font-medium transition-colors">
            ğŸ“¸ Select Images
          </button>
          <div id="selected-images-count" class="text-[#ababab] text-sm">
            No images selected
          </div>
        </div>

        <!-- Region Selection -->
        <div class="mb-4">
          <label class="block text-white text-sm mb-2">Select Regions</label>
          <div class="flex gap-4">
            <div class="flex-1">
              <div class="text-[#ababab] text-sm mb-1">Available</div>
              <ul id="available-region-list" class="region-list"></ul>
            </div>
            <div class="flex flex-col justify-center gap-2">
              <button id="add-region-btn" class="bg-[#00bfff] hover:bg-[#0099cc] text-white px-2 py-1 rounded">&gt;&gt;</button>
              <button id="remove-region-btn" class="bg-[#dc3545] hover:bg-[#c82333] text-white px-2 py-1 rounded">&lt;&lt;</button>
            </div>
            <div class="flex-1">
              <div class="text-[#ababab] text-sm mb-1">Selected</div>
              <ul id="selected-region-list" class="region-list"></ul>
            </div>
          </div>
          <div id="selected-region-names" class="text-[#ababab] text-sm mt-2">No regions selected</div>
        </div>

        <!-- Container for dynamically loaded prompt parts -->
        <div id="dynamic-prompt-parts-container" class="space-y-4 my-4">
          <!-- Prompt parts will be dynamically injected here by JavaScript -->
        </div>

        <button id="send-to-openai" class="mt-2 bg-[#007bff] hover:bg-[#0056b3] text-white px-4 py-2 rounded font-medium transition-colors">Send to OpenAI</button>

        <!-- Dynamic region galleries -->
        <div id="region-galleries" class="space-y-4 mt-4"></div>
      </div>

      <!-- Analysis Controls -->
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
        <!-- Analysis Type Selection -->
        <div class="bg-[#1a1a1a] border border-[#303030] rounded-lg p-6">
          <h3 class="text-white text-lg font-semibold mb-4">ğŸ¯ Analysis Type</h3>
          <div class="space-y-3">
            <label class="flex items-center">
              <input type="radio" name="analysis-type" value="terrain" class="mr-3" checked>
              <span class="text-white">Terrain Analysis</span>
            </label>
            <label class="flex items-center">
              <input type="radio" name="analysis-type" value="vegetation" class="mr-3">
              <span class="text-white">Vegetation Assessment</span>
            </label>
            <label class="flex items-center">
              <input type="radio" name="analysis-type" value="change-detection" class="mr-3">
              <span class="text-white">Change Detection</span>
            </label>
            <label class="flex items-center">
              <input type="radio" name="analysis-type" value="custom" class="mr-3">
              <span class="text-white">Custom Analysis</span>
            </label>
          </div>
        </div>

        <!-- Analysis Parameters -->
        <div class="bg-[#1a1a1a] border border-[#303030] rounded-lg p-6">
          <h3 class="text-white text-lg font-semibold mb-4">âš™ï¸ Parameters</h3>
          <div class="space-y-4">
            <div>
              <label class="block text-white text-sm mb-2">Analysis Prompt</label>
              <textarea id="analysis-prompt"
                        class="w-full bg-[#262626] border border-[#404040] rounded-lg px-3 py-2 text-white placeholder-[#ababab] resize-none focus:outline-none focus:border-[#00bfff]"
                        rows="3"
                        placeholder="Describe what you want to analyze..."></textarea>
            </div>
            <div class="flex gap-4">
              <div class="flex-1">
                <label class="block text-white text-sm mb-2">Model</label>
                <select id="openai-model" class="w-full bg-[#262626] border border-[#404040] rounded-lg px-3 py-2 text-white focus:outline-none focus:border-[#00bfff]">
                  <option value="gpt-4-vision-preview">GPT-4 Vision</option>
                  <option value="gpt-4o">GPT-4o</option>
                  <option value="gpt-4o-mini">GPT-4o Mini</option>
                </select>
              </div>
              <div class="flex-1">
                <label class="block text-white text-sm mb-2">Detail Level</label>
                <select id="detail-level" class="w-full bg-[#262626] border border-[#404040] rounded-lg px-3 py-2 text-white focus:outline-none focus:border-[#00bfff]">
                  <option value="low">Low</option>
                  <option value="high" selected>High</option>
                </select>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Analysis Controls -->
      <div class="flex items-center gap-4 mb-6">
        <button id="start-openai-analysis-btn" class="bg-[#28a745] hover:bg-[#218838] text-white px-6 py-3 rounded-lg font-medium transition-colors">
          ğŸš€ Start Analysis
        </button>
        <button id="stop-openai-analysis-btn" class="bg-[#dc3545] hover:bg-[#c82333] text-white px-6 py-3 rounded-lg font-medium transition-colors hidden">
          ğŸ›‘ Stop Analysis
        </button>
        <div id="openai-analysis-status" class="text-[#ababab] text-sm">
          Ready to analyze
        </div>
      </div>

      <!-- Analysis Results -->
      <div class="bg-[#1a1a1a] border border-[#303030] rounded-lg p-6">
        <h3 class="text-white text-lg font-semibold mb-4">ğŸ“‹ Analysis Results</h3>
        <div id="openai-analysis-results" class="min-h-[300px]">
          <div class="text-center text-[#666] py-8">
            <div class="text-4xl mb-4">ğŸ¤–</div>
            <p>Analysis results will appear here</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
