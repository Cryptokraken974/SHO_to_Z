<div id="openai-analysis-tab" class="tab-content flex flex-1 overflow-hidden">
  <!-- Main Content Area -->
  <div class="flex-1 flex flex-col bg-[#141414] overflow-hidden">
    <!-- Header -->
    <div class="bg-[#1a1a1a] border-b border-[#303030] p-6">
      <h1 class="text-white text-2xl font-bold">ü§ñ OpenAI Analysis</h1>
      <p class="text-[#ababab] text-sm mt-2">AI-powered analysis of your terrain and satellite data</p>
    </div>

    <!-- Main Analysis Area -->
    <div class="flex-1 p-6 overflow-y-auto">
      <!-- Region Selection Section -->
      <div class="mb-6">
        <div class="mb-4">
          <label class="block text-white text-sm mb-2">Select Regions</label>
          <div class="flex gap-4">
            <div class="flex-1">
              <div class="text-[#ababab] text-sm mb-1">Available</div>
              <ul id="available-region-list" class="region-list"></ul>
            </div>
            <div class="flex flex-col justify-center gap-2">
              <button id="add-region-btn" class="bg-[#00bfff] hover:bg-[#0099cc] text-white px-2 py-1 rounded">&gt;&gt;</button>
              <button id="remove-region-btn" class="bg-[#dc3545] hover:bg-[#c82333] text-white px-2 py-1 rounded">&lt;&lt;</button>
            </div>
            <div class="flex-1">
              <div class="text-[#ababab] text-sm mb-1">Selected</div>
              <ul id="selected-region-list" class="region-list"></ul>
            </div>
          </div>
          <div id="selected-region-names" class="text-[#ababab] text-sm mt-2">No regions selected</div>
        </div>

        <!-- Container for dynamically loaded prompt parts -->
        <div id="dynamic-prompt-parts-container" class="space-y-4 my-4">
          <!-- Navigation Header -->
          <div class="flex items-center justify-between bg-[#1a1a1a] border border-[#303030] rounded-lg p-3">
            <button id="prompt-nav-prev" class="bg-[#404040] hover:bg-[#505050] text-white px-3 py-1 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed">
              ‚Üê Previous
            </button>
            <div class="flex items-center space-x-2">
              <span id="prompt-counter" class="text-[#ababab] text-sm">0 / 0</span>
              <span id="prompt-title" class="text-white font-semibold">No prompts loaded</span>
            </div>
            <button id="prompt-nav-next" class="bg-[#404040] hover:bg-[#505050] text-white px-3 py-1 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed">
              Next ‚Üí
            </button>
          </div>
          
          <!-- Prompt Content Area -->
          <div id="prompt-content-area" class="bg-[#1a1a1a] border border-[#303030] rounded-lg p-4">
            <textarea id="current-prompt-textarea" 
                      class="w-full bg-[#262626] border border-[#404040] rounded-lg px-3 py-2 text-white placeholder-[#ababab] resize-none focus:outline-none focus:border-[#00bfff] h-80"
                      placeholder="Loading prompt parts..."></textarea>
          </div>
        </div>

        <!-- Prompt Preview Button -->
        <div class="mb-4">
          <button id="prompt-preview-btn" class="bg-[#28a745] hover:bg-[#218838] text-white px-4 py-2 rounded font-medium transition-colors">
            üìÑ Prompt Preview
          </button>
        </div>

        <!-- Model Selection -->
        <div class="mb-4">
          <label class="block text-white text-sm mb-2">Model</label>
          <select id="openai-model" class="w-full bg-[#262626] border border-[#404040] rounded-lg px-3 py-2 text-white focus:outline-none focus:border-[#00bfff] max-w-xs">
            <option value="gpt-4o">GPT-4o</option>
            <option value="gpt-4o-mini" selected>GPT-4o Mini</option>
            <option value="o1-mini">o1 Mini</option>
          </select>
        </div>

        <button id="send-to-openai" class="bg-[#007bff] hover:bg-[#0056b3] text-white px-4 py-2 rounded font-medium transition-colors">Send to OpenAI</button>
      </div>
    </div>
  </div>

  <!-- Prompt Preview Modal -->
  <div id="prompt-preview-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
    <div class="bg-[#1a1a1a] border border-[#303030] rounded-lg p-6 max-w-4xl max-h-[80vh] w-[90vw] flex flex-col">
      <div class="flex justify-between items-center mb-4">
        <h2 class="text-white text-xl font-bold">üìÑ Complete Prompt Preview</h2>
        <button id="prompt-preview-close" class="text-[#ababab] hover:text-white text-2xl leading-none">&times;</button>
      </div>
      
      <div class="flex-1 overflow-y-auto">
        <div class="bg-[#262626] border border-[#404040] rounded-lg p-4">
          <pre id="prompt-preview-content" class="text-white whitespace-pre-wrap text-sm leading-relaxed"></pre>
        </div>
      </div>
      
      <div class="flex justify-between items-center mt-4 pt-4 border-t border-[#303030]">
        <div class="text-[#ababab] text-sm">
          <span id="prompt-preview-stats">0 characters, 0 words</span>
        </div>
        <div class="flex gap-2">
          <button id="prompt-preview-copy" class="bg-[#6c757d] hover:bg-[#5a6268] text-white px-3 py-1 rounded text-sm transition-colors">
            üìã Copy
          </button>
          <button id="prompt-preview-close-btn" class="bg-[#dc3545] hover:bg-[#c82333] text-white px-3 py-1 rounded text-sm transition-colors">
            Close
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
