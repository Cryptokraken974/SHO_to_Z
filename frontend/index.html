<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>LAZ Terrain Processor (Modular)</title>
  <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin="" />
  <link rel="stylesheet" as="style" onload="this.rel='stylesheet'" href="https://fonts.googleapis.com/css2?display=swap&amp;family=Inter%3Awght%40400%3B500%3B700%3B900&amp;family=Noto+Sans%3Awght%40400%3B500%3B700%3B900" />
  <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
  <!-- Leaflet CSS and JS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
  <link rel="stylesheet" href="https://unpkg.com/leaflet-draw@1.0.4/dist/leaflet.draw.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
  <script src="https://unpkg.com/leaflet-draw@1.0.4/dist/leaflet.draw.js"></script>
  
  <!-- Modular CSS files - load in dependency order -->
  <link rel="stylesheet" href="./css/base.css" />
  <link rel="stylesheet" href="./css/accordion.css" />
  <link rel="stylesheet" href="./css/map-controls.css" />
  <link rel="stylesheet" href="./css/leaflet-draw.css" />
  <link rel="stylesheet" href="./css/gallery.css" />
  <link rel="stylesheet" href="./css/satellite-gallery.css" />
  <link rel="stylesheet" href="./css/tabs.css" />
  <link rel="stylesheet" href="./css/chat.css" />
  <link rel="stylesheet" href="./css/file-modal.css" />
  <link rel="stylesheet" href="./css/acquisition-dialog.css" />
  <link rel="stylesheet" href="./css/scrollbar-focus.css" />
  <link rel="stylesheet" href="./css/geotiff-tools.css" />
  <link rel="stylesheet" href="./css/cache-management.css" />
  <link rel="stylesheet" href="./css/large-image-optimization.css" />
  <link rel="stylesheet" href="./css/openai.css" />
  <link rel="stylesheet" href="./css/results.css" />
  <link rel="stylesheet" href="./css/anomalies-dashboard.css" />
  
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  
  <!-- Add custom styles for resizable panels -->
  <style>
    .resizable-panel {
      position: relative;
      min-width: 200px;
      max-width: 600px;
    }

    .resize-handle {
      position: absolute;
      top: 0;
      right: 0;
      width: 4px;
      height: 100%;
      background: #404040;
      cursor: col-resize;
      transition: background-color 0.2s ease;
      z-index: 10;
    }

    .resize-handle:hover {
      background: #00bfff;
    }

    .resize-handle.dragging {
      background: #00bfff;
    }

    .resize-active {
      user-select: none;
    }
  </style>
</head>
<body class="bg-[#141414] text-white" style='font-family: Inter, "Noto Sans", sans-serif;'>
  <div id="app-container" class="flex flex-col h-screen overflow-hidden">
    <div id="header-placeholder"></div>
    <div id="global-region-selector-placeholder"></div>
    <div id="tab-nav-placeholder"></div>
    <div id="main-content-placeholder" class="flex flex-1 overflow-hidden">
      <!-- Content for the active tab will be loaded here -->
    </div>
    <!-- Modals will be loaded here or at the end of the body -->
    <div id="modals-placeholder"></div>
  </div>

  <!-- JavaScript files - load in dependency order -->
  <script src="/static/js/utils.js"></script>
  <script src="/static/js/api-client.js"></script>
  <script src="/static/js/services/service-factory.js"></script>
  <script src="/static/js/services/elevation-service.js"></script>
  <script src="/static/js/websocket.js"></script>
  <script src="/static/js/map.js"></script>
  <script src="/static/js/fileManager.js"></script>
  <script src="/static/js/metadataManager.js"></script>
  <script src="/static/js/overlays_fixed.js"></script>
  <script src="/static/js/processing.js"></script>
  <script src="/static/js/saved_places.js"></script>
  <script src="/static/js/analysis.js"></script>
  <script src="/static/js/modular-gallery.js"></script>
  <script src="/static/js/raster-overlay-gallery.js"></script>
  <script src="/static/js/satellite-overlay-gallery.js"></script>
  <script src="/static/js/openai-analysis.js"></script>
  <script src="/static/js/ui.js"></script>
  <script src="/static/js/components/results.js"></script>
  <script src="/static/js/components/anomalies-dashboard.js"></script>
  <script src="/static/js/geotiff-left-panel.js"></script>
  <script src="/static/js/geotiff-main-canvas.js"></script>
  <script src="/static/js/app_new.js"></script>

  <!-- OpenAI Loading Overlay -->
  <div id="openai-loading-overlay" class="openai-loading-overlay">
    <div class="openai-loading-content">
      <div class="openai-loading-title">ðŸ¤– AI Analysis in Progress</div>
      <div class="openai-loading-spinner"></div>
      <div class="openai-loading-message">
        Processing images and generating archaeological insights...<br>
        <small>This may take a few moments</small>
      </div>
      <div class="openai-loading-dots">
        <div></div>
        <div></div>
        <div></div>
      </div>
    </div>
  </div>

  <!-- Development and Testing Scripts -->
  <script src="/static/js/elevation-service-test.js"></script>
  <script src="/static/js/api-client-test.js"></script>
  <script src="/static/js/service-factory-test.js"></script>
</body>
</html>