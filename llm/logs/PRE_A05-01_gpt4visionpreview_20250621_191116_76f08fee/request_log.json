{
  "laz_name": "PRE_A05-01",
  "coordinates": null,
  "images": [],
  "prompt": "{\n  \"module_type\": \"preprompt_core_setup\",\n  \"content\": \"You are an expert computational archaeologist. Your mission is to analyze a set of geospatial images provided to you as distinct modules. You will be given modules defining the images and how to interpret them, modules defining potential archaeological features (a visual lexicon), and a series of modules outlining your step-by-step workflow. Your ONLY TASKS is to follow this workflow precisely, synthesizing internally information from all provided modules to produce a final, structured JSON report. Strictly output only this JSON object, in a single code block. Do NOT add any natural language, instructions, or preamble\u2014output. Do not summarize, do not doubt or question the input images. Do NOT build charts. Do NOT inform me that the images are loaded or displayed. Your opinion and ideas are IRRELEVANT. YOU MUST ONLY RETURN THE JSON.\"\n}\n\n{\n  \"module_type\": \"input_image_definition\",\n  \"image_name\": \"boosted_hillshade\",\n  \"full_name\": \"Boosted Hillshade\",\n  \"analysis_stage\": \"primary_detection\",\n  \"phenomenon_signatures\": {\n    \"positive_relief\": \"Appears as a clear 3D feature that seems to rise from the surface, with highlighted edges and a subtle cast shadow, emphasizing its verticality.\",\n    \"negative_relief\": \"Appears as a clear 3D trench or depression that sinks into the surface, often with its edges illuminated.\",\n    \"subtle_topographic_pattern\": \"Makes faint textures or patterns in the terrain more visible and appear three-dimensional.\"\n  }\n}\n\n{\n  \"module_type\": \"input_image_definition\",\n  \"image_name\": \"chm\",\n  \"full_name\": \"Canopy Height Model\",\n  \"analysis_stage\": \"secondary_confirmation\",\n  \"phenomenon_signatures\": {\n    \"vegetation_height_difference\": \"Shows as a clear pattern of contrasting values (e.g., lower canopy on an old settlement vs. higher canopy of the surrounding primary forest).\",\n    \"uniform_regrowth_area\": \"Identified as a zone where the canopy height is consistently lower and more homogenous than the surrounding, more varied, mature forest.\",\n    \"canopy_texture_anomaly\": \"A regular, grid-like, or geometric pattern in the canopy texture that may correspond to underlying agricultural works or settlement patterns.\"\n  }\n}\n\n{\n  \"module_type\": \"input_image_definition\",\n  \"image_name\": \"hillshade_rgb\",\n  \"full_name\": \"RGB\u202fHillshade\",\n  \"analysis_stage\": \"visualisation\",\n  \"phenomenon_signatures\": {\n    \"enhanced_relief\": \"Multi\u2011azimuth shading emphasises three\u2011dimensional form, clarifying both convex and concave shapes.\",\n    \"textural_gradation\": \"Colour transitions convey aspect and illumination, separating overlapping landforms.\",\n    \"context_for_other_layers\": \"Serves as an intuitive backdrop when composited with thematic rasters.\"\n  }\n}\n{\n  \"module_type\": \"input_image_definition\",\n  \"image_name\": \"lrm\",\n  \"full_name\": \"Local Relief Model\",\n  \"analysis_stage\": \"primary_detection\",\n  \"phenomenon_signatures\": {\n    \"positive_relief\": \"Appears as a distinct, bright or light-colored area relative to its immediate surroundings, indicating it is topographically higher.\",\n    \"negative_relief\": \"Appears as a distinct, dark or shadowed area relative to its immediate surroundings, indicating it is topographically lower.\",\n    \"subtle_topographic_pattern\": \"Manifests as a faint but discernible geometric or organized texture that stands out from the natural terrain.\"\n  }\n}\n\n{\n  \"module_type\": \"input_image_definition\",\n  \"image_name\": \"ndvi\",\n  \"full_name\": \"Sentinel-2 NDVI\",\n  \"analysis_stage\": \"secondary_confirmation\",\n  \"phenomenon_signatures\": {\n    \"vegetation_health_anomaly\": \"Shows as a distinct pattern of higher or lower greenness (e.g., a linear feature or geometric shape) that contrasts with the surrounding vegetation.\",\n    \"soil_moisture_pattern\": \"May be inferred from vegetation health; wetter soil from an ancient ditch could support greener vegetation, appearing as a higher NDVI value.\"\n  }\n}\n\n{\n  \"module_type\": \"input_image_definition\",\n  \"image_name\": \"slope\",\n  \"full_name\": \"Slope (Degrees)\",\n  \"analysis_stage\": \"secondary_confirmation\",\n  \"phenomenon_signatures\": {\n    \"steep_faces\": \"High slope values delineate scarps, cliffs or walls.\",\n    \"gentle_plains\": \"Low values map flat valley floors, plateaus or infilled basins.\",\n    \"erosional_patterns\": \"Radial or dendritic clusters of steeper slopes highlight gullies and rill networks.\"\n  }\n}\n{\n  \"module_type\": \"input_image_definition\",\n  \"image_name\": \"svf\",\n  \"full_name\": \"Sky-View Factor\",\n  \"analysis_stage\": \"primary_detection\",\n  \"phenomenon_signatures\": {\n    \"positive_relief\": \"Shows as an area with a very high Sky-View Factor, particularly on its top surface, indicating it is raised and open to the sky.\",\n    \"negative_relief\": \"Shows as an area with a very low Sky-View Factor, indicating it is a depression or trench with obscured sky visibility.\",\n    \"subtle_topographic_pattern\": \"Reveals fine-grained patterns as a high-contrast texture of low and high SVF values.\"\n  }\n}\n\n{\n  \"module_type\": \"input_image_definition\",\n  \"image_name\": \"tint_overlay\",\n  \"full_name\": \"Tint\u202fOverlay\",\n  \"analysis_stage\": \"visualisation\",\n  \"phenomenon_signatures\": {\n    \"elevation_bands\": \"Colour tint portrays elevation or thematic classes, offering instant stratification of terrain.\",\n    \"contrast_with_hillshade\": \"When draped over hillshade, the tint preserves class information while enhancing depth perception.\",\n    \"class_break_highlights\": \"Abrupt colour changes can accentuate terraces, palaeo\u2011shorelines or anthropogenic steps.\"\n  }\n}\n{\n  \"module_type\": \"visual_lexicon_entry\",\n  \"anomaly_name\": \"Causeway\",\n  \"description\": \"Long, narrow, and often curvilinear raised earthen paths. These features may connect platforms, ceremonial areas, or follow natural contours. Although often subtle, they show structured continuity, consistent width, and elevation contrast. Visibility improves with slope or LRM rasters. Unlike modern roads, ancient causeways may curve gently or sharply.\",\n  \"phenomenological_signatures\": {\n    \"required\": [\n      \"positive_relief\"\n    ],\n    \"expected\": [\n      \"steep_faces\",\n      \"subtle_topographic_pattern\",\n      \"vegetation_height_difference\"\n    ],\n    \"secondary\": [\n      \"vegetation_health_anomaly\",\n      \"elevation_bands\",\n      \"subtle_slope_gradient\"\n    ],\n    \"form_characteristics\": {\n      \"linear_alignment\": true,\n      \"connects_to_known_features\": true,\n      \"typical_width_pixels\": [8, 60],\n      \"curvature_constraint\": \"moderate\",\n      \"path_continuity_threshold\": 0.5,\n      \"minimum_length_pixels\": 300\n    }\n  }\n}\n{\n  \"module_type\": \"visual_lexicon_entry\",\n  \"anomaly_name\": \"Geoglyph\",\n  \"description\": \"Large-scale geometric earthworks, typically constructed as excavated ditches, berms, or embanked outlines forming regular shapes such as circles, rectangles, or compound enclosures. These features are often shallow but distinct, with precise proportions, closed-loop geometry, and internal symmetry. They may be partially infilled or eroded but retain recognizable shape patterns.\",\n  \"phenomenological_signatures\": {\n    \"required\": [\n      \"negative_relief\"\n    ],\n    \"expected\": [\n      \"subtle_topographic_pattern\",\n      \"subtle_slope_gradient\",\n      \"elevation_bands\"\n    ],\n    \"secondary\": [\n      \"soil_moisture_pattern\",\n      \"uniform_regrowth_area\",\n      \"vegetation_height_difference\"\n    ],\n    \"form_characteristics\": {\n      \"geometry_type\": [\"circle\", \"rectangle\", \"compound\"],\n      \"closure_ratio_threshold\": 0.85,\n      \"minimum_diameter_pixels\": 80,\n      \"edge_continuity_tolerance\": 0.15,\n      \"symmetry_bias\": true,\n      \"aspect_ratio_constraint\": [0.7, 1.3]\n    }\n  }\n}\n{\n  \"module_type\": \"visual_lexicon_entry\",\n  \"anomaly_name\": \"Hillside Settlement\",\n  \"description\": \"Clusters of anthropogenic features distributed across sloped terrain, typically representing ancient dwellings, terraces, or communal areas arranged to conform with natural hillsides or ridgelines. These settlements may lack a single large platform but exhibit multiple semi-leveled zones, regular clearings, edge structures, or concentric patterns. They often show subtle terracing, stepped relief transitions, and vegetation anomalies tracking the slope.\",\n  \"phenomenological_signatures\": {\n    \"required\": [\n      \"subtle_topographic_pattern\"\n    ],\n    \"expected\": [\n      \"steep_faces\",\n      \"vegetation_height_difference\",\n      \"positive_relief\"\n    ],\n    \"secondary\": [\n      \"vegetation_health_anomaly\",\n      \"subtle_slope_gradient\",\n      \"uniform_regrowth_area\"\n    ],\n    \"form_characteristics\": {\n      \"terrain_context\": \"moderate_to_high_slope\",\n      \"arrangement_pattern\": [\"clustered\", \"linear_along_contour\", \"semi-circular\"],\n      \"terrace_step_height_threshold\": 1.5,\n      \"micro-platform_size_pixels\": [100, 800],\n      \"proximity_bias\": {\n        \"to_causeway\": true,\n        \"to_watercourse\": true,\n        \"to_summit_or_ridge\": true\n      }\n    }\n  }\n}\n{\n  \"module_type\": \"visual_lexicon_entry\",\n  \"anomaly_name\": \"Settlement Platform\",\n  \"description\": \"Artificially leveled or raised earthen surfaces constructed to support dwellings, communal buildings, or ritual spaces. These platforms typically exhibit rectangular, circular, or compound arrangements, and may be found singly or in clusters. They are often enclosed or bounded by subtle berms or ditches, with sharp relief edges and consistent elevation. Settlement platforms are frequently associated with reduced canopy cover, vegetation regrowth zones, or path/causeway intersections.\",\n  \"phenomenological_signatures\": {\n    \"required\": [\n      \"positive_relief\"\n    ],\n    \"expected\": [\n      \"steep_faces\",\n      \"vegetation_height_difference\",\n      \"subtle_topographic_pattern\"\n    ],\n    \"secondary\": [\n      \"vegetation_health_anomaly\",\n      \"elevation_bands\",\n      \"uniform_regrowth_area\"\n    ],\n    \"form_characteristics\": {\n      \"geometry_type\": [\"rectangle\", \"circle\", \"compound\"],\n      \"bounding_edge_slope_threshold\": 15,\n      \"elevation_consistency_threshold\": 0.85,\n      \"platform_area_pixels\": [1000, 25000],\n      \"adjacency_bias\": {\n        \"to_causeway\": true,\n        \"to_geoglyph\": false,\n        \"to_other_platforms\": true\n      }\n    }\n  }\n}\n{\n  \"module_type\": \"workflow_step\",\n  \"step_number\": 0,\n  \"step_name\": \"Curvilinear Feature Extraction (Prepass)\",\n  \"content\": \"Before anomaly detection begins, scan the `slope`, `lrm`, and `svf` rasters using a large-scale path detection algorithm (e.g., ridge detection, line-following, or skeletonization). Identify any extended linear or curvilinear features with consistent width and moderate topographic contrast. Flag each as a 'linear_candidate' for inclusion in the main anomaly detection pipeline. This step targets features that cannot be captured by square-window scanning alone (e.g., S-shaped causeways).\"\n}\n{\n  \"module_type\": \"workflow_step\",\n  \"step_number\": 1,\n  \"step_name\": \"Broad-Spectrum Anomaly Detection\",\n  \"content\": \"Simultaneously examine all rasters derived from surface structure and topography: `lrm`, `svf`, `slope`, and `chm`. Use both sliding window (150\u00d7150) AND vector masks from the 'linear_candidate' prepass to flag possible features. For each detection: - Perform local segmentation using the raster where the anomaly is most distinct (e.g. ridge detection on `slope` for causeways). - Once the core feature is extracted, zoom out incrementally to determine its full spatial extent, expanding until the boundary signatures fall below threshold. - From the final segmented mask, extract the true bounding box (`x_min`, `y_min`, `x_max`, `y_max`) that tightly encloses the full feature. - Ensure this process respects minimum size, shape ratios, and continuity constraints defined in the lexicon. Pass all spatially resolved detections into the next step for multi-layer documentation.\"\n}\n{\n  \"module_type\": \"workflow_step\",\n  \"step_number\": 2,\n  \"step_name\": \"Multi-Layer Evidence Logging\",\n  \"content\": \"For each 'potential anomaly' you identified, you must now systematically document its appearance across ALL available analytical rasters (`lrm`, `svf`, `slope`, `chm`, `ndvi`). Describe the visual evidence from each layer in neutral, factual terms, referencing the specific location of the anomaly. This is a comprehensive data-gathering step; interpretation will come later. For example: 'At the anomaly's location, the LRM shows a subtle positive linear feature. The slope raster shows two parallel dark lines. The NDVI raster shows no corresponding pattern.'\"\n}\n{\n  \"module_type\": \"workflow_step\",\n  \"step_number\": 3,\n  \"step_name\": \"Individual Signature Analysis and Confidence Scoring\",\n  \"content\": \"This is a detailed analytical step. For each anomaly, go through your evidence log from Step 2 layer by layer. Compare your logged observation for a specific raster (e.g., the `slope` image) against its defined `phenomenon_signatures`. Based on the clarity and strength of the match, assign an individual confidence score from 0.0 (no visible signature) to 1.0 (a perfect, unambiguous signature) for that specific layer. Repeat this process to generate an individual confidence score for each analytical raster (`lrm`, `svf`, `slope`, `chm`, `ndvi`).\"\n}\n{\n  \"module_type\": \"workflow_step\",\n  \"step_number\": 4,\n  \"step_name\": \"Integrated Classification and Global Confidence Assessment\",\n  \"content\": \"Synthesize the results from the previous step. First, examine the pattern of individual confidence scores. Use this pattern to select the most appropriate classification from the `visual_lexicon`. A feature with high scores for `positive_relief` (in `lrm`) and `steep_faces` (in `slope`) is likely a 'Settlement Platform' or 'Causeway'. A feature with a high score for `vegetation_height_difference` (in `chm`) is strong evidence for anthropogenic ground disturbance. After classifying, assign a final 'global_confidence_score' based on the strength and convergence of the evidence. High confidence requires strong signatures in multiple, independent data streams (e.g., both topography and vegetation).\"\n}\n{\n  \"module_type\": \"workflow_step\",\n  \"step_number\": 5,\n  \"step_name\": \"Archaeological Interpretation\",\n  \"content\": \"Based on your classification and the detailed evidence profile, formulate a plausible archaeological interpretation for the anomaly. Use the rich, multi-layer information to describe its form, potential function, and relationship to the landscape and other features. Your interpretation should be more nuanced now, referencing which data layers provided the strongest evidence (e.g., 'While topographically subtle, the feature's existence is strongly supported by its clear definition in the slope raster and its persistent influence on vegetation height visible in the CHM').\"\n}\n{\n  \"module_type\": \"workflow_step\",\n  \"step_number\": 6,\n  \"step_name\": \"Generate Final Report\",\n  \"content\": {\n    \"instruction\": \"Your final task is to compile all your findings into a single JSON object. The structure must strictly adhere to the following revised format, which includes a granular, multi-layered confidence assessment and is compatible with the provided set of rasters.\",\n    \"json_format\": {\n      \"analysis_summary\": {\n        \"target_area_id\": \"unique_identifier_for_the_analyzed_area\",\n        \"anomalies_detected\": \"<true or false>\",\n        \"number_of_anomalies\": \"<DYNAMICALLY_DETECTED_COUNT>\"\n      },\n      \"identified_anomalies\": [\n        {\n          \"anomaly_id\": \"<unique_id_for_this_anomaly>\",\n          \"classification\": {\n            \"type\": \"<archaeological_feature_type>\",\n            \"subtype\": \"<optional_subtype>\"\n          },\n          \"confidence\": {\n            \"global_score\": \"<global_confidence_score>\",\n            \"individual_scores\": {\n              \"lrm\": \"<individual_score_for_lrm>\",\n              \"svf\": \"<individual_score_for_svf>\",\n              \"slope\": \"<individual_score_for_slope>\",\n              \"chm\": \"<individual_score_for_chm>\",\n              \"ndvi\": \"<individual_score_for_ndvi>\"\n            }\n          },\n          \"evidence_per_image\": {\n            \"lrm\": \"<Evidence description based on the LRM's specific signatures.>\",\n            \"svf\": \"<Evidence description based on the SVF's specific signatures.>\",\n            \"slope\": \"<Evidence description based on the Slope raster's specific signatures.>\",\n            \"chm\": \"<Evidence description based on the CHM's specific signatures.>\",\n            \"ndvi\": \"<Evidence description based on the NDVI's specific signatures.>\"\n          },\n          \"archaeological_interpretation\": \"<Your synthesis and plausible archaeological interpretation, informed by the multi-layer evidence.>\",\n          \"bounding_box_pixels\": [\n            {\n              \"x_min\": 0,\n              \"y_min\": 0,\n              \"x_max\": 0,\n              \"y_max\": 0\n            }\n          ]\n        }\n      ]\n    }\n  }\n}",
  "model_name": "gpt-4-vision-preview"
}